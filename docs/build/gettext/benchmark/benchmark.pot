# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2023-2025, RTP-LLM
# This file is distributed under the same license as the RTP-LLM package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: RTP-LLM 0.2.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-31 10:27+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../benchmark/benchmark.md:1
msgid "RTP-LLM Performance Benchmark Tool"
msgstr ""

#: ../../benchmark/benchmark.md:2
msgid "In this chapter, I will present the performance testing tools developed in RTP-LLM, including standalone measurement of model prefill and decode performance under various batch sizes with single-node and multi-node parallelism, timeline recording, and their usage methods."
msgstr ""

#: ../../benchmark/benchmark.md:3
msgid "Design Principle"
msgstr ""

#: ../../benchmark/benchmark.md:4
msgid "RTP-LLM employs a special batch scheduler that accumulates requests until the specified batch size is reached, then all requests enter the engine simultaneously. The scheduler supports both prefill and decode modes; in decode mode, requests are only allocated KV cache without prefill, enabling accurate and efficient measurement of engine performance. In detail, the batch-scheduler profiler is executed three times for a single input:"
msgstr ""

#: ../../benchmark/benchmark.md:6
msgid "Warm-up run, to account for one-time setup such as JIT compilation."
msgstr ""

#: ../../benchmark/benchmark.md:7
msgid "Timing run, to measure engine performance."
msgstr ""

#: ../../benchmark/benchmark.md:8
msgid "Profiling run, to capture a timeline for subsequent analysis; this step may degrade end-to-end performance."
msgstr ""

#: ../../benchmark/benchmark.md:10
msgid "For every run we use min_new_tokens and max_new_tokens to ensure that all requests perform the same number of decode steps."
msgstr ""

#: ../../benchmark/benchmark.md:12
msgid "Since in decode mode, we not prefill the KVCache, so hidden_states after every forward step is not real. So we also hack moe gate select for moe model and speculative accept func for mtp. In that way, we get stable result for analyse result."
msgstr ""

#: ../../benchmark/benchmark.md:13
msgid "Single-Node Benchmark"
msgstr ""

#: ../../benchmark/benchmark.md:14
msgid "using commands below can start a performance benchmark, mixed prefill and decode"
msgstr ""

#: ../../benchmark/benchmark.md:27
msgid "specially `batch_size` states for the batch in single DP node, when `DP_SIZE` param is setted."
msgstr ""

#: ../../benchmark/benchmark.md:29
msgid "also we support test prefill or decode only when prefill and decode not share the same config(such as prefill use deepep normal, and decode use deepep masked), in that case user should also set `--partial={0:all(default), 1:decode, 2:prefill}`, below is an example of testing decode only:"
msgstr ""

#: ../../benchmark/benchmark.md:33
msgid "Multi Node Benchmark"
msgstr ""

#: ../../benchmark/benchmark.md:34
msgid "We also provide a Python script to enable multi-node benchmark, but since it requires setting up the environment and starting the script on multiple machines, it still involves more steps than single-node testing."
msgstr ""

#: ../../benchmark/benchmark.md:36
msgid "For each machine to be tested, you need to create an environment in which RTP-LLM can run and support passwordless SSH access from the current machineâ€™s port."
msgstr ""

#: ../../benchmark/benchmark.md:37
msgid "Benchmark Yaml"
msgstr ""

#: ../../benchmark/benchmark.md:38
msgid "Configure the parameters with reference to `rtp_llm/test/perf_test/multi_node/multi_benchmark_config.yaml`. Below is the detail explaination of yaml structure."
msgstr ""

#: ../../benchmark/benchmark.md:40
msgid "First part is the experiment name identifier"
msgstr ""

#: ../../benchmark/benchmark.md:45
msgid "Second part is the test configuration and retry settings."
msgstr ""

#: ../../benchmark/benchmark.md:53
msgid "Third part describe the machine list, user name and port to ssh."
msgstr ""

#: ../../benchmark/benchmark.md:62
msgid "Fourth part is for cloning code to local in ssh machine, checkout to the branch you need to test, and compilation options."
msgstr ""

#: ../../benchmark/benchmark.md:73
msgid "Fifth part is the common configuration shared across all benchmarks."
msgstr ""

#: ../../benchmark/benchmark.md:87
msgid "The sixth part describes the benchmark configuration structure. Each benchmark consists of four main components:"
msgstr ""

#: ../../benchmark/benchmark.md:89
msgid "**benchmark_name**: A unique identifier for the benchmark test case."
msgstr ""

#: ../../benchmark/benchmark.md:91
msgid "**fixed_config**: Contains static configuration that remain constant across all test iterations. This includes model paths, model type, and other fixed settings."
msgstr ""

#: ../../benchmark/benchmark.md:110
msgid "**iterative_search_config**: Defines configuration that will be tested in parallel combinations. All configuration in this section must have lists of equal length, as each index position represents one test configuration. For example, if `dp_size: [1, 4]` and `tp_size: [8, 8]`, the script will test two configurations: `(dp_size=1, tp_size=8)` and `(dp_size=4, tp_size=8)`."
msgstr ""

#: ../../benchmark/benchmark.md:120
msgid "**recursive_search_config**: Defines configuration that will be tested using Cartesian product combinations. Each configuration can have multiple values, and all possible combinations will be tested. For example, with `enable_comm_overlap: [false, true]` and `enable_layer_micro_batch: [0, 2]`, four combinations will be tested: `(false, 0)`, `(false, 2)`, `(true, 0)`, `(true, 2)`."
msgstr ""

#: ../../benchmark/benchmark.md:127
msgid "Run step"
msgstr ""

#: ../../benchmark/benchmark.md:134
msgid "Ultimately, multi-node benchmark dumps trace profiles and logs to local `test_output` directory."
msgstr ""

#: ../../benchmark/benchmark.md:136
msgid "Result Format"
msgstr ""

#: ../../benchmark/benchmark.md:137
msgid "Decode result, where batch size stands for per DP Rank"
msgstr ""

#: ../../benchmark/benchmark.md:155
msgid "Trace files and logs"
msgstr ""
